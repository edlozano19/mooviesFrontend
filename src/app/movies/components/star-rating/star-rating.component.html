<div
    class="star-rating"
    [class.readonly]="readonly"
    [class]="'star-rating-' + size"
    (mouseleave)="onMouseLeave()"
>
    @for (star of stars; track star) {
        <div
            class="star"
            (mousemove)="onStarHover(star, $event)"
            (click)="onStarClick(star, $event)"
        >
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="star-outline">
                <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z" 
                    fill="none" 
                    stroke="currentColor" 
                    stroke-width="2"/>
            </svg>

            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="star-fill" [style.clip-path]="'inset(0 ' + (100 - getStarFill(star)) + '% 0 0)'">
                <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z" 
                      fill="currentColor"/>
            </svg>
        </div>
    }

    @if (!readonly) {
        <span class="rating-text">{{ hoveredRating() || rating || 0 }}/5</span>
    }
</div>